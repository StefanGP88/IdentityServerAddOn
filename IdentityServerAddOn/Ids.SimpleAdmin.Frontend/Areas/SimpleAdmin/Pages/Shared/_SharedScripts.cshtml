<script type="text/javascript">
    var onRemoveConfirmed;
    var onDeleteResource;

    $(function () {
        $('[data-toggle="popover"]').popover()
    });

    function RemoveClassElement(classname, itemType) {
        onRemoveConfirmed = () => {
            DismisRemove();
            $('.' + classname).remove();
        };
        SetRemoveText(itemType);
        $('#modal-remove').modal('show');
    };

    function DismisRemove() {
        onRemoveConfirmed = () => { };
        $('#modal-remove').modal('hide');
        $('#remove-text').html('Are you sure you want to remove this item?');
    };

    function DeleteResource(identifier, resource) {
        onDeleteResource = () => {
            $('#deleteId').val(identifier);
            $('#DeleteForm').submit();
        };
        $('#delete-text').html('Are you sure you want to delete this ' + resource + '?');
        $('#modal-delete').modal('show');
    };

    function DismisDeleteResource() {
        $('#delete-text').html('Are you sure you want to delete this item?');
        $('#deleteId').val('');
        $('#modal-delete').modal('hide');
    };

    function SetRemoveText(itemType) {
        $('#remove-text').html('Are you sure you want to remove this ' + itemType + '?');
    };

    function GetPartial(partialName, appendElement) {
        console.log(partialName);
        console.log(appendElement);
        var input = {
            handler: 'Partial',
            partialName: partialName
        };
        $.get('@(_httpContextAccessor.HttpContext.Request.Path)', input, function (data) {
            console.log(data);
            $('#' + appendElement).append(data);
        });
    };

    function GoToOverview() {
        location.href = '@GetBackUrl()';
    };

    function ShowConfirmBackModel() {
        $('#modal-back').modal('show');
    };

    function CancelGoToOverview() {
        $('#modal-back').modal('hide');
    };
</script>


@functions {
    string GetBackUrl()
    {
        var area = _httpContextAccessor.HttpContext.Request.RouteValues["area"].ToString().ToLower();
        var page = _httpContextAccessor.HttpContext.Request.RouteValues["page"].ToString().ToLower().TrimEnd("info".ToArray());
        page = page.TrimEnd('/');
        return "/" + area + page + _httpContextAccessor.HttpContext.Request.QueryString;
    }
} 